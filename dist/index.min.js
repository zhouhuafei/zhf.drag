"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var extend=require("zhf.extend"),getDomArray=require("zhf.get-dom-array"),Super=function(){function t(e){_classCallCheck(this,t),this.opts=extend({item:"",callback:{mouseDown:function(){},mouseMove:function(){},mouseUp:function(){}},config:{hasIconMove:!0,direction:"all",limitLeftMin:null,limitLeftMax:null,limitTopMin:null,limitTopMax:null,isAdsorption:!0,adsorptionDistance:50},data:{}},e),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this,e=this.opts,i=e.config;getDomArray(e.item).forEach(function(e){"static"===getComputedStyle(e).position&&(e.style.position="relative"),i.hasIconMove&&"move"!==getComputedStyle(e).cursor&&(e.style.cursor="move"),t.events(e)})}},{key:"events",value:function(t){var e=this;function i(t){t.preventDefault(),t.stopPropagation();var i=e.opts,o=i.config,n=o.direction,l=t.clientX-e.disX,a=t.clientY-e.disY;null!==o.limitLeftMin&&(o.isAdsorption?l<=o.limitLeftMin+o.adsorptionDistance&&(l=o.limitLeftMin):l<=o.limitLeftMin&&(l=o.limitLeftMin)),null!==o.limitLeftMax&&(o.isAdsorption?l>=o.limitLeftMax-o.adsorptionDistance&&(l=o.limitLeftMax):l>=o.limitLeftMax&&(l=o.limitLeftMax)),null!==o.limitTopMin&&(o.isAdsorption?a<=o.limitTopMin+o.adsorptionDistance&&(a=o.limitTopMin):a<=o.limitTopMin&&(a=o.limitTopMin)),null!==o.limitTopMax&&(o.isAdsorption?a>=o.limitTopMax-o.adsorptionDistance&&(a=o.limitTopMax):a>=o.limitTopMax&&(a=o.limitTopMax)),e.item.style.right="auto",e.item.style.bottom="auto","all"===n&&(e.item.style.left=l+"px",e.item.style.top=a+"px"),"col"===n&&(e.item.style.top=a+"px"),"row"===n&&(e.item.style.left=l+"px"),i.callback.mouseMove({dom:e.item,left:e.oGetComputedStyle.left,top:e.oGetComputedStyle.top})}function o(t){t.preventDefault(),t.stopPropagation();var n=e.opts;document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),n.callback.mouseUp({dom:e.item,left:e.oGetComputedStyle.left,top:e.oGetComputedStyle.top})}t.addEventListener("mousedown",function(t){t.preventDefault(),t.stopPropagation();var n=e.opts;e.item=this;var l=getComputedStyle(this);e.oGetComputedStyle=l,e.disX=t.clientX-l.left.replace("px",""),e.disY=t.clientY-l.top.replace("px",""),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),n.callback.mouseDown({dom:e.item,left:e.oGetComputedStyle.left,top:e.oGetComputedStyle.top})})}}]),t}();module.exports=Super;