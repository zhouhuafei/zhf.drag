"use strict";var _createClass=function(){function e(e,o){for(var i=0;i<o.length;i++){var t=o[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,i,t){return i&&e(o.prototype,i),t&&e(o,t),o}}();function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var extend=require("zhf.extend"),getDomArray=require("zhf.get-dom-array"),Super=function(){function e(o){var i=this;_classCallCheck(this,e),this.opts=extend({item:"",callback:{mouseDownBefore:function(e){},mouseDownAfter:function(e){},mouseMoveBefore:function(e){},mouseMoveAfter:function(e){},mouseUpBefore:function(e){},mouseUpAfter:function(e){}},config:{hasIconMove:!0,direction:"all",limitLeftMin:null,limitLeftMax:null,limitTopMin:null,limitTopMax:null,isAdsorption:!1,adsorptionDistance:20},data:{}},o),getDomArray(this.opts.item).forEach(function(e){i.events(e)})}return _createClass(e,[{key:"events",value:function(e){var o=this,i=o.opts.config;function t(i){i.preventDefault(),i.stopPropagation();var t=o.opts,n=t.callback;n.mouseMoveBefore({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY});var r=t.config,c=r.direction,v=i.clientX-o.disX,s=i.clientY-o.disY;null!==r.limitLeftMin&&(r.isAdsorption?v<=r.limitLeftMin+r.adsorptionDistance&&(v=r.limitLeftMin):v<=r.limitLeftMin&&(v=r.limitLeftMin)),null!==r.limitLeftMax&&(r.isAdsorption?v>=r.limitLeftMax-r.adsorptionDistance&&(v=r.limitLeftMax):v>=r.limitLeftMax&&(v=r.limitLeftMax)),null!==r.limitTopMin&&(r.isAdsorption?s<=r.limitTopMin+r.adsorptionDistance&&(s=r.limitTopMin):s<=r.limitTopMin&&(s=r.limitTopMin)),null!==r.limitTopMax&&(r.isAdsorption?s>=r.limitTopMax-r.adsorptionDistance&&(s=r.limitTopMax):s>=r.limitTopMax&&(s=r.limitTopMax)),e.style.right="auto",e.style.bottom="auto","all"===c&&(e.style.left=v+"px",e.style.top=s+"px"),"col"===c&&(e.style.top=s+"px"),"row"===c&&(e.style.left=v+"px"),o.moveDistanceX=i.clientX-o.prevMoveClientX,o.moveDistanceY=i.clientY-o.prevMoveClientY,o.moveDistanceX>0?o.moveDirectionX="right":o.moveDistanceX<0&&(o.moveDirectionX="left"),o.moveDistanceY>0?o.moveDirectionY="bottom":o.moveDistanceY<0&&(o.moveDirectionY="top"),o.prevMoveClientX=i.clientX,o.prevMoveClientY=i.clientY,o.overDistanceX=i.clientX-o.mouseDownClientX,o.overDistanceY=i.clientY-o.mouseDownClientY,o.overDistanceX>0?o.overDirectionX="right":o.overDistanceX<0&&(o.overDirectionX="left"),o.overDistanceY>0?o.overDirectionY="bottom":o.overDistanceY<0&&(o.overDirectionY="top"),n.mouseMoveAfter({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})}function n(i){i.preventDefault(),i.stopPropagation();var r=o.opts.callback;r.mouseUpBefore({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY}),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),r.mouseUpAfter({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})}"static"===getComputedStyle(e).position&&(e.style.position="relative"),i.hasIconMove&&"move"!==getComputedStyle(e).cursor&&(e.style.cursor="move"),e.addEventListener("mousedown",function(i){i.preventDefault(),i.stopPropagation();var r=o.opts;o.moveDistanceX=0,o.moveDistanceY=0,o.moveDirectionX="no-move",o.moveDirectionY="no-move",o.overDistanceX=0,o.overDistanceY=0,o.overDirectionX="no-move",o.overDirectionY="no-move",o.prevMoveClientX=i.clientX,o.prevMoveClientY=i.clientY,o.mouseDownClientX=i.clientX,o.mouseDownClientY=i.clientY;var c=r.callback;c.mouseDownBefore({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY});var v=getComputedStyle(this);o.oGetComputedStyle=v,o.disX=i.clientX-v.left.replace("px",""),o.disY=i.clientY-v.top.replace("px",""),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),c.mouseDownAfter({self:o,ev:i,dom:e,moveDistanceX:o.moveDistanceX,moveDistanceY:o.moveDistanceY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDistanceX:o.overDistanceX,overDistanceY:o.overDistanceY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})})}}]),e}();module.exports=Super;