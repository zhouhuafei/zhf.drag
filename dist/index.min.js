"use strict";var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var extend=require("zhf.extend"),getDomArray=require("zhf.get-dom-array"),Super=function(){function e(t){_classCallCheck(this,e),this.opts=extend({item:"",callback:{mouseDownBefore:function(){},mouseDownAfter:function(){},mouseMoveBefore:function(){},mouseMoveAfter:function(){},mouseUpBefore:function(){},mouseUpAfter:function(){}},config:{hasIconMove:!0,direction:"all",limitLeftMin:null,limitLeftMax:null,limitTopMin:null,limitTopMax:null,isAdsorption:!1,adsorptionDistance:20},data:{}},t),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this,t=this.opts,o=t.config;getDomArray(t.item).forEach(function(t){"static"===getComputedStyle(t).position&&(t.style.position="relative"),o.hasIconMove&&"move"!==getComputedStyle(t).cursor&&(t.style.cursor="move"),e.events(t)})}},{key:"events",value:function(e){var t=this;function o(e){e.preventDefault(),e.stopPropagation();var o=t.opts;t.item=this,t.moveSpeedX=0,t.moveSpeedY=0,t.moveDirectionX="no-move",t.moveDirectionY="no-move",t.prevMoveClientX=e.clientX,t.prevMoveClientY=e.clientY,t.mouseDownClientX=e.clientX,t.mouseDownClientY=e.clientY;var l=o.callback;l.mouseDownBefore({self:t,ev:e,dom:t.item});var r=getComputedStyle(this);t.oGetComputedStyle=r,t.disX=e.clientX-r.left.replace("px",""),t.disY=e.clientY-r.top.replace("px",""),document.addEventListener("mousemove",i),document.addEventListener("mouseup",n),l.mouseDownAfter({self:t,ev:e,dom:t.item})}function i(e){e.preventDefault(),e.stopPropagation();var o=t.opts,i=o.callback;i.mouseMoveBefore({self:t,ev:e,dom:t.item});var n=o.config,l=n.direction,r=e.clientX-t.disX,m=e.clientY-t.disY;null!==n.limitLeftMin&&(n.isAdsorption?r<=n.limitLeftMin+n.adsorptionDistance&&(r=n.limitLeftMin):r<=n.limitLeftMin&&(r=n.limitLeftMin)),null!==n.limitLeftMax&&(n.isAdsorption?r>=n.limitLeftMax-n.adsorptionDistance&&(r=n.limitLeftMax):r>=n.limitLeftMax&&(r=n.limitLeftMax)),null!==n.limitTopMin&&(n.isAdsorption?m<=n.limitTopMin+n.adsorptionDistance&&(m=n.limitTopMin):m<=n.limitTopMin&&(m=n.limitTopMin)),null!==n.limitTopMax&&(n.isAdsorption?m>=n.limitTopMax-n.adsorptionDistance&&(m=n.limitTopMax):m>=n.limitTopMax&&(m=n.limitTopMax)),t.item.style.right="auto",t.item.style.bottom="auto","all"===l&&(t.item.style.left=r+"px",t.item.style.top=m+"px"),"col"===l&&(t.item.style.top=m+"px"),"row"===l&&(t.item.style.left=r+"px"),t.moveSpeedX=e.clientX-t.prevMoveClientX,t.moveSpeedY=e.clientY-t.prevMoveClientY,t.moveSpeedX>0?t.moveDirectionX="right":t.moveSpeedX<0&&(t.moveDirectionX="left"),t.moveSpeedY>0?t.moveDirectionY="bottom":t.moveSpeedY<0&&(t.moveDirectionY="top"),t.prevMoveClientX=e.clientX,t.prevMoveClientY=e.clientY,i.mouseMoveAfter({self:t,ev:e,dom:t.item})}function n(e){e.preventDefault(),e.stopPropagation();var o=t.opts.callback;o.mouseUpBefore({self:t,ev:e,dom:t.item}),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",n),o.mouseUpAfter({self:t,ev:e,dom:t.item})}e.removeEventListener("mousedown",o),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",n),e.addEventListener("mousedown",o)}}]),e}();module.exports=Super;