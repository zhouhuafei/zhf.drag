"use strict";var _createClass=function(){function e(e,o){for(var i=0;i<o.length;i++){var t=o[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,i,t){return i&&e(o.prototype,i),t&&e(o,t),o}}();function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var extend=require("zhf.extend"),getDomArray=require("zhf.get-dom-array"),Super=function(){function e(o){var i=this;_classCallCheck(this,e),this.opts=extend({item:"",callback:{mouseDownBefore:function(){},mouseDownAfter:function(){},mouseMoveBefore:function(){},mouseMoveAfter:function(){},mouseUpBefore:function(){},mouseUpAfter:function(){}},config:{hasIconMove:!0,direction:"all",limitLeftMin:null,limitLeftMax:null,limitTopMin:null,limitTopMax:null,isAdsorption:!1,adsorptionDistance:20},data:{}},o),getDomArray(this.opts.item).forEach(function(e){i.events(e)})}return _createClass(e,[{key:"events",value:function(e){var o=this,i=o.opts.config;function t(i){i.preventDefault(),i.stopPropagation();var t=o.opts,n=t.callback;n.mouseMoveBefore({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY});var r=t.config,v=r.direction,m=i.clientX-o.disX,c=i.clientY-o.disY;null!==r.limitLeftMin&&(r.isAdsorption?m<=r.limitLeftMin+r.adsorptionDistance&&(m=r.limitLeftMin):m<=r.limitLeftMin&&(m=r.limitLeftMin)),null!==r.limitLeftMax&&(r.isAdsorption?m>=r.limitLeftMax-r.adsorptionDistance&&(m=r.limitLeftMax):m>=r.limitLeftMax&&(m=r.limitLeftMax)),null!==r.limitTopMin&&(r.isAdsorption?c<=r.limitTopMin+r.adsorptionDistance&&(c=r.limitTopMin):c<=r.limitTopMin&&(c=r.limitTopMin)),null!==r.limitTopMax&&(r.isAdsorption?c>=r.limitTopMax-r.adsorptionDistance&&(c=r.limitTopMax):c>=r.limitTopMax&&(c=r.limitTopMax)),e.style.right="auto",e.style.bottom="auto","all"===v&&(e.style.left=m+"px",e.style.top=c+"px"),"col"===v&&(e.style.top=c+"px"),"row"===v&&(e.style.left=m+"px"),o.moveSpeedX=i.clientX-o.prevMoveClientX,o.moveSpeedY=i.clientY-o.prevMoveClientY,o.moveSpeedX>0?o.moveDirectionX="right":o.moveSpeedX<0&&(o.moveDirectionX="left"),o.moveSpeedY>0?o.moveDirectionY="bottom":o.moveSpeedY<0&&(o.moveDirectionY="top"),o.prevMoveClientX=i.clientX,o.prevMoveClientY=i.clientY;var l=i.clientX-o.mouseDownClientX,p=i.clientY-o.mouseDownClientY;l>0?o.overDirectionX="right":l<0&&(o.overDirectionX="left"),p>0?o.overDirectionY="bottom":p<0&&(o.overDirectionY="top"),n.mouseMoveAfter({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})}function n(i){i.preventDefault(),i.stopPropagation();var r=o.opts.callback;r.mouseUpBefore({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY}),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),r.mouseUpAfter({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})}"static"===getComputedStyle(e).position&&(e.style.position="relative"),i.hasIconMove&&"move"!==getComputedStyle(e).cursor&&(e.style.cursor="move"),e.addEventListener("mousedown",function(i){i.preventDefault(),i.stopPropagation();var r=o.opts;o.moveSpeedX=0,o.moveSpeedY=0,o.moveDirectionX="no-move",o.moveDirectionY="no-move",o.overDirectionX="no-move",o.overDirectionY="no-move",o.prevMoveClientX=i.clientX,o.prevMoveClientY=i.clientY,o.mouseDownClientX=i.clientX,o.mouseDownClientY=i.clientY;var v=r.callback;v.mouseDownBefore({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY});var m=getComputedStyle(this);o.oGetComputedStyle=m,o.disX=i.clientX-m.left.replace("px",""),o.disY=i.clientY-m.top.replace("px",""),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),v.mouseDownAfter({self:o,ev:i,dom:e,moveSpeedX:o.moveSpeedX,moveSpeedY:o.moveSpeedY,moveDirectionX:o.moveDirectionX,moveDirectionY:o.moveDirectionY,overDirectionX:o.overDirectionX,overDirectionY:o.overDirectionY})})}}]),e}();module.exports=Super;